//                                    1   2   3   4   5   6   7
//unsigned char array_letter_pieces[]={'L','J','Z','S','T','O','I'};
unsigned char array_number_pieces[]={0,1,2,3,4,5,6,7,8};
/*
N                           
N                            
NN                                                           
Pieza L color naranja 
*/

/*unsigned char lPiece[4][2]={
    {0,0},
    {1,0},
    {2,0},
    {2,1}
};*/ 
/*
unsigned char lPieceString[4][10]={
    {' ',' ',' ',' ','0',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','0',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','0','0',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};
*/
unsigned char lPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 1, 1, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};
/*
 J
 J  
JJ   
Pieza J color azul  
*/
/*unsigned char jPiece[4][2]={
    {0,1},
    {1,1},
    {2,1},
    {2,0}
};*/
/*unsigned char jPieceString[4][10]={
    {' ',' ',' ',' ','2',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','2','2','2',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};*/
unsigned char jPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 2, 2, 2, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};
/*
 RR
  RR   
Pieza Z color rojo
*/
/*unsigned char zPiece[4][2]={
    {0,0},
    {0,1},
    {1,1},
    {1,2}
};*/
/*unsigned char zPieceString[4][10]={
    {' ',' ',' ','Z','Z',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','Z','Z',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};*/
unsigned char zPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 3, 3, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 3, 3, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};
/*
 VV
VV
Pieza S color verde
*/
/*unsigned char sPiece[4][2]={
    {0,1},
    {0,2},
    {1,0},
    {1,1}
};*/
/*unsigned char sPieceString[4][10]={
    {' ',' ',' ',' ','S','S',' ',' ',' ',' '},
    {' ',' ',' ','S','S',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};*/
unsigned char sPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 4, 4, 0, 0, 0, 0},
    { 0, 0, 0, 4, 4, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};

/*
 M                     
MMM  
Pieza T color Morado        
*/
/*unsigned char tPiece[4][2]={
    {0,1},
    {1,0},
    {1,1},
    {1,2}
};*/
/*unsigned char tPieceString[4][10]={
    {' ',' ',' ',' ','T',' ',' ',' ',' ',' '},
    {' ',' ',' ','T','T','T',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};*/
unsigned char tPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
    { 0, 0, 0, 5, 5, 5, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};
/*
AA
AA
Pieza O color amarillo
*/
/*unsigned char oPiece[4][2]={
    {0,0},
    {0,1},
    {1,0},
    {1,1}
};*/
/*unsigned char oPieceString[4][10]={
    {' ',' ',' ',' ','O','O',' ',' ',' ',' '},
    {' ',' ',' ',' ','O','O',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}
};*/
unsigned char oPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 6, 6, 0, 0, 0, 0},
    { 0, 0, 0, 0, 6, 6, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
};
/*
 C
 C
 C
 C
Pieza I color Cyan
*/
/*unsigned char iPiece[4][2]={
    {0,0},
    {1,0},
    {2,0},
    {3,0}
};*/
/*unsigned char iPieceString[4][10]={
    {' ',' ',' ',' ','I',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','I',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','I',' ',' ',' ',' ',' '},
    {' ',' ',' ',' ','I',' ',' ',' ',' ',' '}
};*/
unsigned char iPiece[5][10]={
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 7, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 7, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 7, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 7, 0, 0, 0, 0, 0}
};

/*****************ROTATIONS**************/
//PIECE J
/*    
    - 1 - - - - - - - - -
    - 2 3 4 - - - - - - - 
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,1},{-1,0},{0,-1},{1,-2}
    - 2 1 - - - - - - - -
    - 3 - - - - - - - - -
    - 4 - - - - - - - - -

    - 1 2 - - - - - - - -
    - 3 - - - - - - - - -
    - 4 - - - - - - - - -
    Movimiento 2
    {0,2},{1,1},{-1,1},{-2,0}
    - 4 3 2 - - - - - - -
    - - - 1 - - - - - - -
    - - - - - - - - - - -
    Movimiento 3
    {0,1},{1,0},{2,-1},{1,-2}
    - - - 4 - - - - - - -
    - - - 3 - - - - - - -
    - - 1 2 - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {1,1},{0,0},{-2,0},{-1,-1}    
    - 1 - - - - - - - - -
    - 2 3 4 - - - - - - - 
    - - - - - - - - - - -
*/
signed char jRotations[4][4][2]={
    {
        {1,1},{0,0},{-2,0},{-1,-1}
    },
    {
        {0,1},{-1,0},{0,-1},{1,-2}
    },
    {
        {0,2},{1,1},{-1,1},{-2,0}
    },
    {
        {0,1},{1,0},{2,-1},{1,-2}
    }
};
//PIECE L
/*   
    - 1 - - - - - - - - -
    - 2 - - - - - - - - - 
    - 3 4 - - - - - - - -
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,2},{-1,1},{-2,0},{-1,-1}
    - 3 2 1 - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -

    - 1 2 3 - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 2
    {2,2},{1,1},{1,0},{1,2}
    - - 4 3 - - - - - - -
    - - - 2 - - - - - - -
    - - - 1 - - - - - - -
    - - - - - - - - - - -

    - - 1 2 - - - - - - -
    - - - 3 - - - - - - -
    - - - 4 - - - - - - -
    - - - - - - - - - - -

    Movimiento 3
    {1,1},{2,-2},{1,-1},{0,0}
    - - - - - - - - - - -
    - - - 1 - - - - - - -
    - 2 3 4 - - - - - - -
    - - - - - - - - - - -

    - - - - - - - - - - -
    - - - 1 - - - - - - -
    - 2 3 4 - - - - - - -
    - - - - - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {-1,-2},{-1,0},{0,-1},{0,-1}    
    - 1 - - - - - - - - -
    - 2 - - - - - - - - - 
    - 3 4 - - - - - - - -
    - - - - - - - - - - -
*/
signed char lRotations[4][4][2]={
    {
        {-1,-2},{-1,0},{0,-1},{0,-1}    
    },
    {
        {0,2},{-1,1},{-2,0},{-1,-1}
    },
    {
        {2,2},{1,1},{0,0},{-1,1}
    },
    {
        {1,1},{2,-2},{1,-1},{0,0}
    }
};

//PIECE Z
/*    
    - - - - - - - - - - -
    - 1 2 - - - - - - - -
    - - 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,2},{1,1},{0,0},{1,-1}
    {-1,2},{0,1},{-1,0},{0,-1}
    - - 1 - - - - - - - -
    - 3 2 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -

    - - - - - - - - - - -
    - - 1 - - - - - - - -
    - 3 2 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -

    - - 1 - - - - - - - -
    - 2 3 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 2
    {1,-2},{1,0},{1,-1},{0,1}
    - 1 2 - - - - - - - -
    - - 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 3
    {0,2},{1,1},{0,0},{1,-1}
    {-1,2},{0,1},{-1,0},{0,-1}
    - - 1 - - - - - - - -
    - 2 3 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {0,-2},{-1,0},{0,-1},{-1,1}
    - 1 2 - - - - - - - -
    - - 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
*/
/*signed char zRotations[4][4][2]={
    {
        {0,-2},{-1,0},{0,-1},{-1,1}
    },
    {
        {0,2},{1,1},{0,0},{1,-1}
    },
    {
        //Estas aki en movimiento 2
        {0,-2},{-1,0},{0,-1},{-1,1}
    },
    {
        {0,2},{1,1},{0,0},{1,-1}
    }
};*/

signed char zRotations[4][4][2]={
    {
        {1,-2},{0,0},{1,-1},{0,1}
    },
    {
        {-1,2},{0,1},{-1,0},{0,-1}
    },
    {
        //Estas aki en movimiento 2
        {1,-2},{0,0},{1,-1},{0,1}
    },
    {
        {-1,2},{0,1},{-1,0},{0,-1}
    }
};

//PIECE S
/*    
    - - 1 2 - - - - - - -
    - 3 4 - - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,-1},{1,-2},{0,1},{1,0}
    {-1,-1},{0,-2},{-1,1},{0,0}
    - 1 - - - - - - - - -
    - 2 3 - - - - - - - -
    - - 4 - - - - - - - -
    - - - - - - - - - - -
    Movimiento 2
    {0,2},{-1,1},{0,0},{-1,-1}
    {1,2},{0,1},{1,0},{0,-1}
    - - 2 1 - - - - - - -
    - 4 3 - - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 3
    {0,-1},{1,-2},{0,1},{1,0}
    - 1 - - - - - - - - -
    - 2 3 - - - - - - - -
    - - 4 - - - - - - - -
    - - - - - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {0,2},{-1,1},{0,0},{-1,-1}
    - - 2 1 - - - - - - -
    - 4 3 - - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
*/
signed char sRotations[4][4][2]={
    {
         {1,2},{0,1},{1,0},{0,-1}
    },
    {
        {-1,-1},{0,-2},{-1,1},{0,0}
    },
    {
        //2 movimiento
         {1,2},{0,1},{1,0},{0,-1}
    },
    {
        {-1,-1},{0,-2},{-1,1},{0,0}
    }
};

//PIECE T
/*    
    - - 1 - - - - - - - -
    - 2 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,0},{-2,0},{-1,-1},{0,-2}
    - 2 - - - - - - - - -
    - 3 1 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -

    - 1 - - - - - - - - -
    - 2 3 - - - - - - - -
    - 4 - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 2
    {1,1},{-1,0},{-1,0},{-2,2}
    - 2 3 4 - - - - - - -
    - - 1 - - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -

    - 1 2 3 - - - - - - -
    - - 4 - - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 3
    {0,2},{1,0},{1,0},{1,1}
    {0,3},{1,1},{1,1},{1,2}
    - - 1 - - - - - - - -
    - 2 3 - - - - - - - -
    - - 4 - - - - - - - -
    - - - - - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {1,-1},{1,-1},{1,-1},{0,0}
    - - 1 - - - - - - - -
    - 2 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
*/

signed char tRotations[4][4][2]={
    {
        {1,-1},{1,-1},{1,-1},{0,0}
    },
    {
        {0,0},{-2,0},{-1,-1},{0,-2}
    },
    {
        {1,1},{-1,0},{-1,0},{-2,2}
    },
    {
        {0,2},{1,0},{1,0},{1,1}
    }
};
signed char tRotationsRight[4][4][2]={
    {
        {0,3},{1,1},{1,1},{1,2}
    },
    {
        {0,0},{-2,0},{-1,-1},{0,-2}
    },
    {
        {1,1},{-1,0},{-1,0},{-2,2}
    },
    {
        {0,2},{1,0},{1,0},{1,1}
    }
};
//PIECE I
/*    
    - - 1 - - - - - - - -
    - - 2 - - - - - - - - 
    - - 3 - - - - - - - -
    - - 4 - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {3,-2},{2,-1},{1,0},{0,1}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    1 2 3 4 - - - - - - -
    Movimiento 2
    {-3,2},{-2,1},{-1,0},{0,-1}
    - - 1 - - - - - - - -
    - - 2 - - - - - - - - 
    - - 3 - - - - - - - -
    - - 4 - - - - - - - -
    Movimiento 3
    {3,-2},{2,-1},{1,0},{0,1}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    1 2 3 4 - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {-3,2},{-2,1},{-1,0},{0,-1}
    - - 1 - - - - - - - -
    - - 2 - - - - - - - - 
    - - 3 - - - - - - - -
    - - 4 - - - - - - - -
*/
signed char iRotations[4][4][2]={
    {
        {-3,2},{-2,1},{-1,0},{0,-1}
    },
    {
        {3,-2},{2,-1},{1,0},{0,1}
    },
    {
        {-3,2},{-2,1},{-1,0},{0,-1}
    },
    {
        {3,-2},{2,-1},{1,0},{0,1}
    }
};
//PIECE O
/*    
    - - 1 2 - - - - - - -
    - - 3 4 - - - - - - - 
    - - - - - - - - - - -
    - - - - - - - - - - -
    Para rotarlo
    Movimiento 1
      1      2     3      4
     f c    f c    f c    f c
    {0,0},{0,0},{0,0},{0,0}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 2
    {0,0},{0,0},{0,0},{0,0}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento 3
    {0,0},{0,0},{0,0},{0,0}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    Movimiento4 (volver a la posición inicial)
    {0,0},{0,0},{0,0},{0,0}
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
    - - - - - - - - - - -
*/
signed char oRotations[4][4][2]={
    {
        {0,0},{0,0},{0,0},{0,0}
    },
    {
        {0,0},{0,0},{0,0},{0,0}
    },
    {
        {0,0},{0,0},{0,0},{0,0}
    },
    {
        {0,0},{0,0},{0,0},{0,0}
    }
};
typedef struct{
    char number;
    char letter;
    char color;
    char x,y;
    char rotation;
    char *rotations;
} TPiece;
TPiece* create_piece(char piece_letter){
    
    TPiece pieceL={
        1,          //number
        'L',        //letter
        1,          //color
        0,0,        //x,y
        0,        //rotation
        &lRotations[0][0][0]
    };
    TPiece pieceJ={
        2,          //number
        'J',        //letter
        2,          //color
        0,0,        //x,y
        0,         //rotation
        &jRotations[0][0][0]
    };
    TPiece pieceZ={
        3,          //number
        'Z',        //letter
        3,          //color
        0,0,        //x,y
        0,          //rotation
        &zRotations[0][0][0]
    };
    TPiece pieceS={
        4,          //number
        'S',        //letter
        4,          //color
        0,0,        //x,y
        0,          //rotation
        &sRotations[0][0][0]
    };
    TPiece pieceT={
        5,          //number
        'T',        //letter
        5,          //color
        0,0,        //x,y
        0,          //rotation
        &tRotations[0][0][0]
    };
    TPiece pieceO={
        6,          //number
        'O',        //letter
        6,          //color
        0,0,        //x,y
        0,          //rotation
        &oRotations[0][0][0]
    };
    TPiece pieceI={
        7,          //number
        'I',        //letter
        7,          //color
        0,0,        //x,y
        0,        //rotation
        &iRotations[0][0][0]
    };
    TPiece *piece=NULL;
    if(piece_letter=='L')
        piece=&pieceL;
    else if(piece_letter=='J')    
        piece=&pieceJ;
    else if(piece_letter=='Z')    
        piece=&pieceZ;
    else if(piece_letter=='S')    
        piece=&pieceS;
    else if(piece_letter=='T')    
        piece=&pieceT;
    else if(piece_letter=='O')    
        piece=&pieceO;
    else if(piece_letter=='I')    
        piece=&pieceI;
    return piece;   
}